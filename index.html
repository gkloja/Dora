<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <title>Dôra Atelier · Experiência Sensorial</title>
  
  <meta name="description" content="Dôra Atelier: onde cada peça conta uma história da Amazônia.">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500&family=La+Belle+Aurore&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --clay: #c17f59;
      --clay-dark: #9e6240;
      --forest: #2c4a3e;
      --sand: #f5efe6;
      --charcoal: #2c2825;
      --gold: #cdb28b;
      
      --transition-slow: 0.6s cubic-bezier(0.23, 1, 0.32, 1);
      --transition-bounce: 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    body {
      background-color: var(--sand);
      color: var(--charcoal);
      font-family: 'Inter', sans-serif;
      overflow-x: hidden;
      cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%23c17f59" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 8v8M8 12h8"/></svg>') 12 12, auto;
    }

    /* Loading Screen */
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--sand);
      z-index: 9999;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      transition: transform 1.2s cubic-bezier(0.77, 0, 0.175, 1);
    }

    .loading-screen.hidden {
      transform: translateY(-100%);
    }

    .loom {
      width: 120px;
      height: 120px;
      position: relative;
      margin-bottom: 2rem;
    }

    .thread {
      position: absolute;
      width: 2px;
      height: 100%;
      background: linear-gradient(180deg, transparent, var(--clay), transparent);
      left: 50%;
      transform: translateX(-50%);
      animation: weave 1.5s infinite;
    }

    .thread:nth-child(2) { transform: translateX(-50%) rotate(45deg); }
    .thread:nth-child(3) { transform: translateX(-50%) rotate(-45deg); }

    @keyframes weave {
      0%, 100% { opacity: 0.3; height: 80%; }
      50% { opacity: 1; height: 100%; }
    }

    /* Hero Section */
    .hero {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: relative;
      overflow: hidden;
    }

    .hero-video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0.2;
      pointer-events: none;
    }

    .hero-content {
      text-align: center;
      z-index: 2;
      padding: 2rem;
    }

    .signature {
      font-family: 'La Belle Aurore', cursive;
      font-size: clamp(2rem, 8vw, 4rem);
      color: var(--clay);
      margin-bottom: 1rem;
      opacity: 0;
      animation: floatIn 1s ease 0.5s forwards;
    }

    .title {
      font-family: 'Playfair Display', serif;
      font-size: clamp(3rem, 12vw, 7rem);
      font-weight: 700;
      letter-spacing: -0.02em;
      line-height: 0.9;
      margin-bottom: 2rem;
      position: relative;
    }

    .title span {
      display: block;
      font-size: 0.4em;
      font-weight: 300;
      letter-spacing: 0.5em;
      margin-top: 1rem;
      color: var(--forest);
    }

    .thread-line {
      width: 150px;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--clay), transparent);
      margin: 2rem auto;
    }

    .scroll-hint {
      position: absolute;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      color: var(--forest);
      font-size: 0.8rem;
      letter-spacing: 2px;
    }

    .scroll-hint i {
      animation: bounce 2s infinite;
    }

    /* Gallery Filters */
    .filter-section {
      padding: 2rem;
      position: sticky;
      top: 0;
      background: rgba(245, 239, 230, 0.85);
      backdrop-filter: blur(10px);
      z-index: 100;
      border-bottom: 1px solid rgba(193, 127, 89, 0.2);
    }

    .filter-container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .filter-buttons {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .filter-btn {
      background: transparent;
      border: 1px solid var(--clay);
      padding: 0.8rem 2rem;
      border-radius: 40px;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.3s;
      color: var(--charcoal);
      position: relative;
      overflow: hidden;
    }

    .filter-btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: var(--clay);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
      z-index: -1;
    }

    .filter-btn:hover::before,
    .filter-btn.active::before {
      width: 300px;
      height: 300px;
    }

    .filter-btn:hover,
    .filter-btn.active {
      color: white;
      border-color: var(--clay);
    }

    .piece-count {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--forest);
    }

    .count-number {
      font-size: 2rem;
      font-weight: 300;
      font-family: 'Playfair Display', serif;
      color: var(--clay);
      line-height: 1;
    }

    /* Gallery Grid */
    .gallery {
      max-width: 1600px;
      margin: 0 auto;
      padding: 4rem 2rem;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 2rem;
    }

    .piece-card {
      position: relative;
      cursor: pointer;
      opacity: 0;
      transform: translateY(40px);
      transition: opacity 0.8s, transform 0.8s;
    }

    .piece-card.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .card-media {
      position: relative;
      aspect-ratio: 3/4;
      overflow: hidden;
      background: #e5dbd2;
      border-radius: 2px;
    }

    .card-media img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 1.2s;
    }

    .piece-card:hover .card-media img {
      transform: scale(1.08);
    }

    .card-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(44, 42, 37, 0.2);
      backdrop-filter: blur(2px);
      opacity: 0;
      transition: opacity 0.4s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .piece-card:hover .card-overlay {
      opacity: 1;
    }

    .view-lens {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--clay);
      font-size: 1.5rem;
      transform: scale(0);
      transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .piece-card:hover .view-lens {
      transform: scale(1);
    }

    .multi-badge {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: white;
      padding: 0.5rem 1rem;
      border-radius: 30px;
      font-size: 0.7rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      z-index: 2;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    .card-info {
      padding: 1.5rem 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .card-ref {
      font-family: 'Playfair Display', serif;
      font-size: 1rem;
      color: var(--forest);
    }

    .card-category {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--clay);
    }

    /* Modal Experience */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--sand);
      z-index: 2000;
      display: none;
      opacity: 0;
      transition: opacity 0.5s;
    }

    .modal.active {
      display: flex;
      opacity: 1;
    }

    .modal-layout {
      display: grid;
      grid-template-columns: 1.5fr 1fr;
      width: 100%;
      height: 100%;
    }

    /* Carrossel */
    .carousel {
      position: relative;
      background: #222;
      overflow: hidden;
    }

    .carousel-track {
      display: flex;
      height: 100%;
      transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
    }

    .carousel-slide {
      min-width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .carousel-slide img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }

    .carousel-nav {
      position: absolute;
      bottom: 2rem;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 0.8rem;
      z-index: 10;
    }

    .carousel-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(255,255,255,0.3);
      cursor: pointer;
      transition: all 0.3s;
    }

    .carousel-dot.active {
      background: var(--clay);
      transform: scale(1.5);
    }

    .carousel-arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: transparent;
      border: none;
      color: white;
      font-size: 2rem;
      cursor: pointer;
      padding: 2rem;
      opacity: 0.5;
      transition: opacity 0.3s;
      z-index: 10;
    }

    .carousel-arrow:hover {
      opacity: 1;
    }

    .carousel-arrow.prev { left: 1rem; }
    .carousel-arrow.next { right: 1rem; }

    /* Modal Info */
    .modal-info {
      padding: 4rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
      position: relative;
      background: var(--sand);
    }

    .modal-close {
      position: absolute;
      top: 2rem;
      right: 2rem;
      background: transparent;
      border: none;
      font-size: 2rem;
      cursor: pointer;
      color: var(--charcoal);
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.3s;
    }

    .modal-close:hover {
      background: var(--clay);
      color: white;
      transform: rotate(90deg);
    }

    .modal-ref {
      font-size: 0.8rem;
      color: var(--clay);
      letter-spacing: 3px;
      text-transform: uppercase;
      margin-bottom: 1rem;
    }

    .modal-title {
      font-family: 'Playfair Display', serif;
      font-size: 2.5rem;
      font-weight: 600;
      color: var(--forest);
      margin-bottom: 2rem;
    }

    .modal-description {
      line-height: 1.8;
      color: var(--charcoal);
      margin-bottom: 3rem;
      font-size: 1.1rem;
      opacity: 0.8;
    }

    .whatsapp-reserve {
      background: #25D366;
      color: white;
      text-decoration: none;
      padding: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 1.1rem;
      text-transform: uppercase;
      letter-spacing: 2px;
      transition: all 0.3s;
      border: 1px solid transparent;
      margin-top: 2rem;
      position: relative;
      overflow: hidden;
    }

    .whatsapp-reserve::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }

    .whatsapp-reserve:hover::before {
      left: 100%;
    }

    .whatsapp-reserve:hover {
      background: white;
      color: #25D366;
      border-color: #25D366;
    }

    /* Elementos Flutuantes */
    .sound-scape {
      position: fixed;
      bottom: 2rem;
      left: 2rem;
      z-index: 3000;
      display: flex;
      gap: 1rem;
    }

    .sound-btn {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--forest);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: 2px solid var(--gold);
      transition: all 0.3s;
    }

    .sound-btn:hover {
      transform: scale(1.1);
      background: var(--clay);
    }

    .ambient-waves {
      display: flex;
      align-items: flex-end;
      gap: 3px;
      height: 30px;
    }

    .wave {
      width: 3px;
      background: var(--gold);
      animation: wave 1s infinite;
    }

    .wave:nth-child(1) { height: 15px; animation-delay: 0s; }
    .wave:nth-child(2) { height: 25px; animation-delay: 0.2s; }
    .wave:nth-child(3) { height: 10px; animation-delay: 0.4s; }
    .wave:nth-child(4) { height: 20px; animation-delay: 0.1s; }
    .wave:nth-child(5) { height: 12px; animation-delay: 0.3s; }

    @keyframes wave {
      0%, 100% { transform: scaleY(0.5); }
      50% { transform: scaleY(1.5); }
    }

    .fixed-whatsapp {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 60px;
      height: 60px;
      background: var(--forest);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 2rem;
      text-decoration: none;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      transition: all 0.3s;
      z-index: 3000;
      border: 2px solid var(--gold);
    }

    .fixed-whatsapp:hover {
      transform: rotate(15deg) scale(1.1);
      background: #25D366;
    }

    footer {
      text-align: center;
      padding: 4rem;
      border-top: 1px solid rgba(193, 127, 89, 0.2);
      color: var(--forest);
    }

    @keyframes floatIn {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }

    @media (max-width: 900px) {
      .modal-layout {
        grid-template-columns: 1fr;
        overflow-y: auto;
      }
      
      .carousel { height: 50vh; }
      .modal-info { padding: 2rem; }
    }
  </style>
</head>
<body>

  <!-- Loading Screen -->
  <div class="loading-screen" id="loadingScreen">
    <div class="loom">
      <div class="thread"></div>
      <div class="thread"></div>
      <div class="thread"></div>
    </div>
    <div class="signature" style="font-size: 1.5rem;">Tecendo histórias</div>
  </div>

  <!-- Elementos Sonoros -->
  <div class="sound-scape">
    <div class="sound-btn" id="ambientBtn">
      <i class="fas fa-music" id="ambientIcon"></i>
    </div>
    <div class="ambient-waves" id="ambientWaves">
      <div class="wave"></div>
      <div class="wave"></div>
      <div class="wave"></div>
      <div class="wave"></div>
      <div class="wave"></div>
    </div>
  </div>

  <!-- WhatsApp Fixo -->
  <a href="https://wa.me/559292055895" class="fixed-whatsapp" target="_blank">
    <i class="fab fa-whatsapp"></i>
  </a>

  <!-- Hero Section -->
  <section class="hero">
    <video class="hero-video" autoplay muted loop playsinline>
      <source src="https://player.vimeo.com/external/370468553.sd.mp4?s=14d7a2d4a1d0b1e5b9a9b9e8b5f5b5f5&profile_id=165" type="video/mp4">
    </video>
    
    <div class="hero-content">
      <div class="signature">Dôra Atelier</div>
      <h1 class="title">
        ARTE EM<br>CADA FIO
        <span>MANAUS · AMAZÔNIA</span>
      </h1>
      <div class="thread-line"></div>
    </div>

    <div class="scroll-hint">
      <span>DESVENDAR</span>
      <i class="fas fa-chevron-down"></i>
    </div>
  </section>

  <!-- Filter Section -->
  <div class="filter-section">
    <div class="filter-container">
      <div class="filter-buttons">
        <button class="filter-btn active" id="filterLatest">Lançamentos</button>
        <button class="filter-btn" id="filterRandom">Surpreenda-me</button>
      </div>
      <div class="piece-count">
        <span class="count-number" id="totalCount">0</span>
        <span>peças únicas</span>
      </div>
    </div>
  </div>

  <!-- Gallery Grid -->
  <div class="gallery" id="gallery"></div>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-layout">
      <!-- Carrossel -->
      <div class="carousel" id="carousel">
        <div class="carousel-track" id="carouselTrack"></div>
        
        <button class="carousel-arrow prev" id="prevSlide"><i class="fas fa-chevron-left"></i></button>
        <button class="carousel-arrow next" id="nextSlide"><i class="fas fa-chevron-right"></i></button>
        
        <div class="carousel-nav" id="carouselDots"></div>
      </div>

      <!-- Informações -->
      <div class="modal-info">
        <button class="modal-close" onclick="closeModal()">&times;</button>
        
        <div class="modal-ref" id="modalRef"></div>
        <h2 class="modal-title" id="modalTitle">Bolsa Artesanal</h2>
        <p class="modal-description" id="modalDesc"></p>
        
        <a href="#" class="whatsapp-reserve" id="modalWhatsapp" target="_blank">
          <span>Reservar</span>
          <i class="fab fa-whatsapp"></i>
        </a>
      </div>
    </div>
  </div>

  <footer>
    <p>© 2026 Dôra Atelier · Feito à mão em Manaus</p>
    <p style="margin-top: 1rem; font-size: 0.8rem; opacity: 0.6;">Cada ponto conta uma história da floresta</p>
  </footer>

  <script>
    // Sistema de sons
    const sounds = {
      click: new Audio('data:audio/wav;base64,UklGRlwAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YVAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'),
      hover: new Audio('data:audio/wav;base64,UklGRlwAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YVAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA')
    };
    
    // Configurar volume baixo
    Object.values(sounds).forEach(sound => {
      sound.volume = 0.2;
    });

    // Dados do catálogo
    const TOTAL_IMAGENS = 114;
    
    // Grupos definidos
    const rawGroups = [
      [1, 2, 3, 53], 
      [24, 25, 26], 
      [56, 57, 58], 
      [76, 83],
      [87, 88, 89], 
      [86, 90, 91], 
      [105, 106, 111],
      [108, 109, 101, 114], 
      [10, 31, 64], 
      [103, 107],
      [22, 37, 72], 
      [34, 49, 59, 67], 
      [100, 95]
    ];

    const descricoes = [
      "Inspirada nas tramas amazônicas, esta peça carrega a textura da floresta em cada detalhe. O bordado manual evoca as folhas de ouricuri.",
      "A linha encontra a tradição neste design contemporâneo. Cada ponto é uma homenagem às artesãs do Alto Rio Negro.",
      "Feita com algodão natural tingido com casca de jenipapo. Uma peça que conta a história da terra.",
      "Técnica ancestral de bordado que leva dias para ser concluída. Exclusividade e arte em cada centímetro.",
      "O ouro do buriti encontra a delicadeza do crochê. Uma peça para durar gerações.",
      "Desenho autoral que remete às ondas do encontro das águas. Leveza e movimento em cada fio."
    ];

    let catalogo = [];
    const processedIds = new Set();

    // Processar grupos
    rawGroups.forEach(group => {
      const mainId = group[0];
      const images = group.map(id => `imagens/${id.toString().padStart(3, '0')}.jpg`);
      
      catalogo.push({
        id: mainId,
        displayId: mainId.toString().padStart(3, '0'),
        images: images,
        isGroup: true,
        desc: descricoes[Math.floor(Math.random() * descricoes.length)]
      });

      group.forEach(id => processedIds.add(id));
    });

    // Processar individuais
    for (let i = 1; i <= TOTAL_IMAGENS; i++) {
      if (!processedIds.has(i)) {
        catalogo.push({
          id: i,
          displayId: i.toString().padStart(3, '0'),
          images: [`imagens/${i.toString().padStart(3, '0')}.jpg`],
          isGroup: false,
          desc: descricoes[Math.floor(Math.random() * descricoes.length)]
        });
      }
    }

    catalogo.sort((a, b) => a.id - b.id);

    // Renderização
    const gallery = document.getElementById('gallery');
    const totalCount = document.getElementById('totalCount');
    let currentCatalog = [...catalogo];

    function renderGallery(items) {
      gallery.innerHTML = '';
      totalCount.textContent = items.length;

      items.forEach((item, index) => {
        const card = document.createElement('div');
        card.className = 'piece-card';
        card.style.transitionDelay = `${index * 30}ms`;

        card.innerHTML = `
          <div class="card-media">
            <img src="${item.images[0]}" alt="Peça Dôra" loading="lazy">
            <div class="card-overlay">
              <div class="view-lens">
                <i class="fas fa-eye"></i>
              </div>
            </div>
            ${item.images.length > 1 ? `
              <div class="multi-badge">
                <i class="fas fa-layer-group"></i>
                <span>+${item.images.length - 1}</span>
              </div>
            ` : ''}
          </div>
          <div class="card-info">
            <span class="card-ref">REF ${item.displayId}</span>
            <span class="card-category">${item.isGroup ? 'coleção' : 'única'}</span>
          </div>
        `;

        card.onclick = () => openModal(item);
        
        observer.observe(card);
        gallery.appendChild(card);
      });
    }

    // Intersection Observer
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, { threshold: 0.1 });

    // Modal
    const modal = document.getElementById('modal');
    const carouselTrack = document.getElementById('carouselTrack');
    const carouselDots = document.getElementById('carouselDots');
    const modalRef = document.getElementById('modalRef');
    const modalDesc = document.getElementById('modalDesc');
    const modalWhatsapp = document.getElementById('modalWhatsapp');
    const prevSlide = document.getElementById('prevSlide');
    const nextSlide = document.getElementById('nextSlide');

    let currentItem = null;
    let currentSlide = 0;

    function openModal(item) {
      currentItem = item;
      currentSlide = 0;
      
      modalRef.textContent = `REF: ${item.displayId}`;
      modalDesc.textContent = item.desc;
      
      // Montar link do WhatsApp com imagem específica
      const imageUrl = `https://atelierdora.onrender.com/${item.images[currentSlide]}`;
      const message = `Olá Dôra! Me interessei por esta peça (${imageUrl}) da sua coleção. Gostaria de mais informações.`;
      modalWhatsapp.href = `https://wa.me/559292055895?text=${encodeURIComponent(message)}`;

      setupCarousel(item.images);
      
      modal.classList.add('active');
    }

    function setupCarousel(images) {
      carouselTrack.innerHTML = '';
      carouselDots.innerHTML = '';

      images.forEach((src, index) => {
        const slide = document.createElement('div');
        slide.className = 'carousel-slide';
        slide.innerHTML = `<img src="${src}" alt="Detalhe da peça">`;
        carouselTrack.appendChild(slide);

        if (images.length > 1) {
          const dot = document.createElement('div');
          dot.className = `carousel-dot ${index === 0 ? 'active' : ''}`;
          dot.onclick = () => goToSlide(index);
          carouselDots.appendChild(dot);
        }
      });

      updateCarousel();
    }

    function goToSlide(index) {
      if (!currentItem) return;
      
      if (index < 0) index = currentItem.images.length - 1;
      if (index >= currentItem.images.length) index = 0;
      
      currentSlide = index;
      updateCarousel();
      
      // Atualizar link do WhatsApp com a imagem atual
      if (currentItem) {
        const imageUrl = `https://atelierdora.onrender.com/${currentItem.images[currentSlide]}`;
        const message = `Olá Dôra! Me interessei por esta peça (${imageUrl}) da sua coleção. Gostaria de mais informações.`;
        modalWhatsapp.href = `https://wa.me/559292055895?text=${encodeURIComponent(message)}`;
      }
    }

    function updateCarousel() {
      if (!currentItem) return;
      
      carouselTrack.style.transform = `translateX(-${currentSlide * 100}%)`;
      
      const dots = document.querySelectorAll('.carousel-dot');
      dots.forEach((dot, index) => {
        if (index === currentSlide) {
          dot.classList.add('active');
        } else {
          dot.classList.remove('active');
        }
      });
    }

    prevSlide.onclick = () => goToSlide(currentSlide - 1);
    nextSlide.onclick = () => goToSlide(currentSlide + 1);

    // Touch events
    let touchStartX = 0;
    carouselTrack.addEventListener('touchstart', (e) => {
      touchStartX = e.touches[0].clientX;
    });

    carouselTrack.addEventListener('touchend', (e) => {
      const touchEndX = e.changedTouches[0].clientX;
      const diff = touchEndX - touchStartX;
      
      if (Math.abs(diff) > 50) {
        if (diff > 0) {
          goToSlide(currentSlide - 1);
        } else {
          goToSlide(currentSlide + 1);
        }
      }
    });

    window.closeModal = () => {
      modal.classList.remove('active');
    };

    // Filtros
    document.getElementById('filterLatest').onclick = function() {
      this.classList.add('active');
      document.getElementById('filterRandom').classList.remove('active');
      renderGallery(catalogo);
    };

    document.getElementById('filterRandom').onclick = function() {
      this.classList.add('active');
      document.getElementById('filterLatest').classList.remove('active');
      const shuffled = [...catalogo].sort(() => 0.5 - Math.random());
      renderGallery(shuffled);
    };

    // Áudio ambiente
    const ambientBtn = document.getElementById('ambientBtn');
    const ambientIcon = document.getElementById('ambientIcon');
    const ambientWaves = document.getElementById('ambientWaves');
    let ambientPlaying = false;
    
    // Criar áudio ambiente (som da floresta)
    const forestSound = new Audio('https://www.soundjay.com/nature/sounds/rain-01.mp3');
    forestSound.loop = true;
    forestSound.volume = 0.1;

    ambientBtn.onclick = () => {
      if (!ambientPlaying) {
        forestSound.play();
        ambientIcon.className = 'fas fa-volume-up';
        ambientWaves.style.opacity = '1';
      } else {
        forestSound.pause();
        ambientIcon.className = 'fas fa-music';
        ambientWaves.style.opacity = '0.3';
      }
      ambientPlaying = !ambientPlaying;
    };

    // Loading
    window.onload = () => {
      setTimeout(() => {
        document.getElementById('loadingScreen').classList.add('hidden');
        renderGallery(catalogo);
      }, 2000);
    };

    // Fechar modal com ESC
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeModal();
    });
  </script>
</body>
</html>
